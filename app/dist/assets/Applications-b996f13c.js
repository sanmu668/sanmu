import{d as W,r,w as X,o as Y,b as o,C as Z,e as u,B as N,h as a,g as l,i as k,j as s,D as ee,f,t as j,k as x,N as te,O as ae,L as z,P as le,I as ne,J as oe,E as B,F as se}from"./index-a7f98987.js";import{r as re}from"./request-f6ee6398.js";import{A as ie}from"./index-99461ef4.js";import{_ as de}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-3a665b0f.js";const ue={class:"applications-container"},pe={class:"card-header"},ce={class:"pagination-container"},_e=W({__name:"Applications",setup(me){const v=r(!1),y=r("all"),m=r(1),b=r(10),p=r(0),c=r([]),_=async()=>{v.value=!0;try{const t=await re.get(ie.USER.APPLICATIONS);t.data&&Array.isArray(t.data)?(c.value=t.data.map(e=>({jobTitle:e.jobName,company:e.company,salary:e.salary_range,applyTime:e.submittedTime,status:A(e.status),progress:[{type:"success",color:"#0bbd87",time:e.submittedTime,content:"简历投递成功"}]})),p.value=t.data.length):t.data?(c.value=[{jobTitle:t.data.jobName,company:t.data.company,salary:t.data.salary_range,applyTime:t.data.submittedTime,status:A(t.data.status),progress:[{type:"success",color:"#0bbd87",time:t.data.submittedTime,content:"简历投递成功"}]}],p.value=1):(c.value=[],p.value=0)}catch(t){console.error("获取投递记录失败:",t),B.error("获取投递记录失败"),c.value=[],p.value=0}finally{v.value=!1}},A=t=>({待处理:"pending",审核中:"reviewing",面试中:"interview",已录用:"offer",已拒绝:"rejected"})[t]||t,P=t=>({pending:"info",reviewing:"warning",interview:"primary",offer:"success",rejected:"danger"})[t]||"info",D=t=>({pending:"待处理",reviewing:"审核中",interview:"面试中",offer:"已录用",rejected:"已拒绝"})[t]||"未知",E=t=>{b.value=t,_()},I=t=>{m.value=t,_()};X(y,()=>{m.value=1,_()}),Y(()=>{_()});const M=t=>{console.log("查看职位详情:",t)},w=r(!1),C=r(null),U=t=>{C.value=t,w.value=!0},L=t=>{se.confirm("确定要撤销该职位的投递吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{B.success("撤销成功"),_()})};return(t,e)=>{const i=o("el-radio-button"),O=o("el-radio-group"),S=o("el-button"),d=o("el-table-column"),$=o("el-tag"),T=o("el-icon"),V=o("el-dropdown-item"),h=o("el-dropdown-menu"),F=o("el-dropdown"),J=o("el-table"),q=o("el-pagination"),R=o("el-card"),G=o("el-timeline-item"),H=o("el-timeline"),K=o("el-dialog"),Q=Z("loading");return u(),N("div",ue,[a(R,null,{header:l(()=>[k("div",pe,[e[10]||(e[10]=k("span",null,"投递记录",-1)),a(O,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=n=>y.value=n),size:"small"},{default:l(()=>[a(i,{value:"all"},{default:l(()=>e[4]||(e[4]=[s("全部")])),_:1}),a(i,{value:"pending"},{default:l(()=>e[5]||(e[5]=[s("待处理")])),_:1}),a(i,{value:"reviewing"},{default:l(()=>e[6]||(e[6]=[s("审核中")])),_:1}),a(i,{value:"interview"},{default:l(()=>e[7]||(e[7]=[s("面试中")])),_:1}),a(i,{value:"offer"},{default:l(()=>e[8]||(e[8]=[s("已录用")])),_:1}),a(i,{value:"rejected"},{default:l(()=>e[9]||(e[9]=[s("已拒绝")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[ee((u(),f(J,{data:c.value,style:{width:"100%"}},{default:l(()=>[a(d,{prop:"jobTitle",label:"职位名称","min-width":"200"},{default:l(({row:n})=>[a(S,{type:"primary",link:"",onClick:g=>M(n)},{default:l(()=>[s(j(n.jobTitle),1)]),_:2},1032,["onClick"])]),_:1}),a(d,{prop:"company",label:"公司","min-width":"150"}),a(d,{prop:"salary",label:"薪资",width:"120"}),a(d,{prop:"applyTime",label:"投递时间",width:"180"}),a(d,{prop:"status",label:"状态",width:"100"},{default:l(({row:n})=>[a($,{type:P(n.status)},{default:l(()=>[s(j(D(n.status)),1)]),_:2},1032,["type"])]),_:1}),a(d,{label:"操作",width:"100",fixed:"right"},{default:l(({row:n})=>[a(F,{trigger:"click"},{dropdown:l(()=>[a(h,null,{default:l(()=>[a(V,{onClick:g=>U(n),disabled:n.status==="rejected"},{default:l(()=>[a(T,null,{default:l(()=>[a(x(te))]),_:1}),e[11]||(e[11]=s(" 查看进度 "))]),_:2},1032,["onClick","disabled"]),n.status==="pending"?(u(),f(V,{key:0,onClick:g=>L(n),type:"danger"},{default:l(()=>[a(T,null,{default:l(()=>[a(x(ae))]),_:1}),e[12]||(e[12]=s(" 撤销投递 "))]),_:2},1032,["onClick"])):z("",!0)]),_:2},1024)]),default:l(()=>[a(S,{type:"primary",link:""},{default:l(()=>[a(T,null,{default:l(()=>[a(x(le))]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Q,v.value]]),k("div",ce,[a(q,{"current-page":m.value,"onUpdate:currentPage":e[1]||(e[1]=n=>m.value=n),"page-size":b.value,"onUpdate:pageSize":e[2]||(e[2]=n=>b.value=n),total:p.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:E,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),_:1}),a(K,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=n=>w.value=n),title:"投递进度",width:"600px","destroy-on-close":""},{default:l(()=>[C.value?(u(),f(H,{key:0},{default:l(()=>[(u(!0),N(ne,null,oe(C.value.progress,(n,g)=>(u(),f(G,{key:g,type:n.type,color:n.color,timestamp:n.time},{default:l(()=>[s(j(n.content),1)]),_:2},1032,["type","color","timestamp"]))),128))]),_:1})):z("",!0)]),_:1},8,["modelValue"])])}}});const we=de(_e,[["__scopeId","data-v-ee9c040d"]]);export{we as default};
