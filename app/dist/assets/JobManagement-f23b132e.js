import{d as _e,u as ye,G as I,r as g,o as he,b as s,C as Ve,e as q,B as M,h as e,g as a,S as L,k as $,ac as je,j as i,ad as xe,i as S,W as ke,D as Ce,f as O,t as C,I as G,J as W,E as _,F as H}from"./index-a7f98987.js";import{r as T}from"./request-e257bb45.js";import{_ as Ne}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-3a665b0f.js";function qe(c){const m={...c,pagesize:c.pageSize};return delete m.pageSize,T({url:"/api/admin/job",method:"get",params:m})}function Se(c){return T({url:"/api/admin/job",method:"post",data:c})}function Te(c,m){return T({url:`/api/admin/job/${c}`,method:"put",data:m})}function Ue(c){return T({url:`/api/admin/job/${c}`,method:"delete"})}function Ae(c,m){return T({url:`/api/admin/job/${c}/status`,method:"put",data:{status:m}})}const Re={class:"job-management"},ze={class:"card-header"},Ke={class:"header-actions"},we={class:"pagination-container"},Je={class:"dialog-footer"},Me=_e({__name:"JobManagement",setup(c){const m=ye(),p=I({jobName:"",company:"",status:""}),N=g(!1),V=g([]),j=g(1),U=g(10),A=g(0),x=g(!1),R=g("add"),K=g(),o=I({jobName:"",company:"",department:"",location:[],salaryRange:"",jobType:"fulltime",experience:"",education:"",tags:[],description:"",requirements:"",status:"0"}),Q={jobName:[{required:!0,message:"请输入职位名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],company:[{required:!0,message:"请输入公司名称",trigger:"blur"}],department:[{required:!0,message:"请输入所属部门",trigger:"blur"}],location:[{required:!0,message:"请选择工作地点",trigger:"change"}],salaryRange:[{required:!0,message:"请选择薪资范围",trigger:"change"}],experience:[{required:!0,message:"请选择经验要求",trigger:"change"}],education:[{required:!0,message:"请选择学历要求",trigger:"change"}],description:[{required:!0,message:"请输入职位描述",trigger:"blur"}],requirements:[{required:!0,message:"请输入任职要求",trigger:"blur"}]},X=[{value:"全国",label:"全国"},{value:"北京市",label:"北京市",children:[{value:"全市",label:"全市"},{value:"朝阳区",label:"朝阳区"},{value:"海淀区",label:"海淀区"},{value:"丰台区",label:"丰台区"},{value:"西城区",label:"西城区"}]},{value:"上海市",label:"上海市",children:[{value:"全市",label:"全市"},{value:"浦东新区",label:"浦东新区"},{value:"徐汇区",label:"徐汇区"},{value:"静安区",label:"静安区"},{value:"长宁区",label:"长宁区"}]},{value:"广东省",label:"广东省",children:[{value:"深圳市",label:"深圳市",children:[{value:"南山区",label:"南山区"},{value:"福田区",label:"福田区"},{value:"罗湖区",label:"罗湖区"},{value:"宝安区",label:"宝安区"},{value:"龙岗区",label:"龙岗区"}]},{value:"广州市",label:"广州市",children:[{value:"天河区",label:"天河区"},{value:"越秀区",label:"越秀区"},{value:"海珠区",label:"海珠区"},{value:"荔湾区",label:"荔湾区"}]},{value:"东莞市",label:"东莞市"},{value:"珠海市",label:"珠海市"}]},{value:"浙江省",label:"浙江省",children:[{value:"杭州市",label:"杭州市",children:[{value:"西湖区",label:"西湖区"},{value:"滨江区",label:"滨江区"},{value:"上城区",label:"上城区"},{value:"余杭区",label:"余杭区"}]},{value:"宁波市",label:"宁波市",children:[{value:"海曙区",label:"海曙区"},{value:"江北区",label:"江北区"}]},{value:"温州市",label:"温州市"}]},{value:"江苏省",label:"江苏省",children:[{value:"南京市",label:"南京市",children:[{value:"玄武区",label:"玄武区"},{value:"秦淮区",label:"秦淮区"},{value:"建邺区",label:"建邺区"}]},{value:"苏州市",label:"苏州市",children:[{value:"姑苏区",label:"姑苏区"},{value:"工业园区",label:"工业园区"},{value:"高新区",label:"高新区"}]},{value:"无锡市",label:"无锡市"},{value:"常州市",label:"常州市"}]},{value:"山东省",label:"山东省",children:[{value:"青岛市",label:"青岛市",children:[{value:"市南区",label:"市南区"},{value:"市北区",label:"市北区"}]},{value:"济南市",label:"济南市"}]},{value:"四川省",label:"四川省",children:[{value:"成都市",label:"成都市",children:[{value:"武侯区",label:"武侯区"},{value:"锦江区",label:"锦江区"},{value:"高新区",label:"高新区"}]}]},{value:"福建省",label:"福建省",children:[{value:"厦门市",label:"厦门市",children:[{value:"思明区",label:"思明区"},{value:"湖里区",label:"湖里区"}]},{value:"福州市",label:"福州市"}]},{value:"湖北省",label:"湖北省",children:[{value:"武汉市",label:"武汉市",children:[{value:"江岸区",label:"江岸区"},{value:"武昌区",label:"武昌区"},{value:"洪山区",label:"洪山区"}]}]},{value:"天津市",label:"天津市",children:[{value:"全市",label:"全市"},{value:"和平区",label:"和平区"},{value:"南开区",label:"南开区"}]},{value:"重庆市",label:"重庆市",children:[{value:"全市",label:"全市"},{value:"渝中区",label:"渝中区"},{value:"江北区",label:"江北区"}]},{value:"河南省",label:"河南省",children:[{value:"郑州市",label:"郑州市",children:[{value:"金水区",label:"金水区"},{value:"中原区",label:"中原区"}]}]},{value:"陕西省",label:"陕西省",children:[{value:"西安市",label:"西安市",children:[{value:"雁塔区",label:"雁塔区"},{value:"莲湖区",label:"莲湖区"}]}]},{value:"湖南省",label:"湖南省",children:[{value:"长沙市",label:"长沙市",children:[{value:"岳麓区",label:"岳麓区"},{value:"天心区",label:"天心区"},{value:"高新区",label:"高新区"}]},{value:"株洲市",label:"株洲市"}]},{value:"安徽省",label:"安徽省",children:[{value:"合肥市",label:"合肥市",children:[{value:"蜀山区",label:"蜀山区"},{value:"包河区",label:"包河区"},{value:"高新区",label:"高新区"}]},{value:"芜湖市",label:"芜湖市"}]},{value:"辽宁省",label:"辽宁省",children:[{value:"沈阳市",label:"沈阳市",children:[{value:"和平区",label:"和平区"},{value:"沈河区",label:"沈河区"}]},{value:"大连市",label:"大连市",children:[{value:"中山区",label:"中山区"},{value:"西岗区",label:"西岗区"},{value:"高新园区",label:"高新园区"}]}]},{value:"河北省",label:"河北省",children:[{value:"石家庄市",label:"石家庄市",children:[{value:"长安区",label:"长安区"},{value:"桥西区",label:"桥西区"}]},{value:"雄安新区",label:"雄安新区"}]},{value:"江西省",label:"江西省",children:[{value:"南昌市",label:"南昌市",children:[{value:"东湖区",label:"东湖区"},{value:"西湖区",label:"西湖区"}]}]},{value:"海南省",label:"海南省",children:[{value:"海口市",label:"海口市",children:[{value:"龙华区",label:"龙华区"},{value:"秀英区",label:"秀英区"}]},{value:"三亚市",label:"三亚市"},{value:"海南自贸港",label:"海南自贸港"}]},{value:"云南省",label:"云南省",children:[{value:"昆明市",label:"昆明市",children:[{value:"五华区",label:"五华区"},{value:"官渡区",label:"官渡区"}]}]},{value:"贵州省",label:"贵州省",children:[{value:"贵阳市",label:"贵阳市",children:[{value:"南明区",label:"南明区"},{value:"观山湖区",label:"观山湖区"}]}]},{value:"广西壮族自治区",label:"广西壮族自治区",children:[{value:"南宁市",label:"南宁市",children:[{value:"青秀区",label:"青秀区"},{value:"兴宁区",label:"兴宁区"}]},{value:"桂林市",label:"桂林市"}]},{value:"山西省",label:"山西省",children:[{value:"太原市",label:"太原市",children:[{value:"小店区",label:"小店区"},{value:"迎泽区",label:"迎泽区"}]}]},{value:"内蒙古自治区",label:"内蒙古自治区",children:[{value:"呼和浩特市",label:"呼和浩特市",children:[{value:"回民区",label:"回民区"},{value:"新城区",label:"新城区"}]},{value:"包头市",label:"包头市"}]},{value:"黑龙江省",label:"黑龙江省",children:[{value:"哈尔滨市",label:"哈尔滨市",children:[{value:"南岗区",label:"南岗区"},{value:"道里区",label:"道里区"}]}]},{value:"吉林省",label:"吉林省",children:[{value:"长春市",label:"长春市",children:[{value:"朝阳区",label:"朝阳区"},{value:"南关区",label:"南关区"}]}]}],Y=["Vue","React","Angular","TypeScript","Node.js","Java","Python","Go","微服务","云原生"],y=async()=>{N.value=!0;try{const u={page:j.value,pageSize:U.value,jobName:p.jobName||void 0,company:p.company||void 0,status:p.status||void 0};console.log("Fetching jobs with params:",u);const l=await qe(u);console.log("Full API response:",l),l!=null&&l.content?(V.value=l.content.map(d=>({...d,tags:d.tags?d.tags.split(","):[],location:d.location?d.location.split(" / "):[]})),A.value=l.totalElements,console.log("Processed job list:",V.value)):(V.value=[],A.value=0,console.warn("No data received from API"))}catch(u){console.error("获取职位列表失败:",u),_.error("获取职位列表失败"),V.value=[],A.value=0}finally{N.value=!1}},w=()=>{j.value=1,y()},Z=()=>{p.jobName="",p.company="",p.status="",j.value=1,y()},ee=u=>{U.value=u,y()},le=u=>{j.value=u,y()},ae=()=>{R.value="add",x.value=!0,Object.assign(o,{jobName:"",company:"",department:"",location:[],salaryRange:"",jobType:"fulltime",experience:"",education:"",tags:[],description:"",requirements:"",status:"0"})},B=async u=>{R.value="edit",x.value=!0;const l=typeof u.location=="string"?u.location.split(" / "):Array.isArray(u.location)?u.location:[];Object.assign(o,{id:u.id,jobName:u.jobName||"",company:u.company||"",department:u.department||"",location:l,salaryRange:u.salaryRange||"",jobType:u.jobType||"fulltime",experience:u.experience||"",education:u.education||"",tags:Array.isArray(u.tags)?u.tags:typeof u.tags=="string"?u.tags.split(","):[],description:u.description||"",requirements:u.requirements||"",status:u.status||"0"})},te=u=>!u||!Array.isArray(u)?"":u.join(" / "),ue=async()=>{K.value&&await K.value.validate(async u=>{if(u)try{N.value=!0;const l={...o,tags:Array.isArray(o.tags)?o.tags.join(","):o.tags,location:te(o.location)};if(R.value==="add")await Se(l),_.success("发布成功");else{const d=V.value.find(n=>n.jobName===o.jobName);d&&(await Te(d.id,l),_.success("修改成功"))}x.value=!1,y()}catch(l){console.error("提交失败:",l),_.error("操作失败")}finally{N.value=!1}})},oe=async u=>{const l=u.status==="1"?"下线":"发布",d=u.status==="1"?"0":"1";try{await H.confirm(`确定要${l}该职位吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ae(u.id,d),_.success(`${l}成功`),u.status=d}catch(n){n!=="cancel"&&(console.error("更新职位状态失败:",n),_.error("操作失败"))}},ne=async u=>{try{await H.confirm("确定要删除该职位吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ue(u.id),_.success("删除成功"),y()}catch(l){l!=="cancel"&&(console.error("删除职位失败:",l),_.error("删除失败"))}},re=u=>{m.push({name:"ApplicationManagement",query:{jobId:u.id}})},de=u=>({1:"success",0:"info",2:"danger"})[u]||"info",se=u=>({1:"已发布",0:"未发布",2:"已下线"})[u]||u,ie=u=>u?new Date(u).toLocaleString():"";return he(()=>{y()}),(u,l)=>{const d=s("el-input"),n=s("el-form-item"),r=s("el-option"),k=s("el-select"),J=s("el-icon"),v=s("el-button"),D=s("el-form"),F=s("el-card"),b=s("el-table-column"),P=s("el-tag"),be=s("el-button-group"),pe=s("el-table"),ce=s("el-pagination"),f=s("el-col"),z=s("el-row"),ve=s("el-cascader"),E=s("el-radio"),me=s("el-radio-group"),fe=s("el-dialog"),ge=Ve("loading");return q(),M("div",Re,[e(F,{class:"search-card"},{default:a(()=>[e(D,{inline:!0,model:p,class:"search-form"},{default:a(()=>[e(n,{label:"职位名称"},{default:a(()=>[e(d,{modelValue:p.jobName,"onUpdate:modelValue":l[0]||(l[0]=t=>p.jobName=t),placeholder:"请输入职位名称",clearable:"",onKeyup:L(w,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"公司名称"},{default:a(()=>[e(d,{modelValue:p.company,"onUpdate:modelValue":l[1]||(l[1]=t=>p.company=t),placeholder:"请输入公司名称",clearable:"",onKeyup:L(w,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"发布状态"},{default:a(()=>[e(k,{modelValue:p.status,"onUpdate:modelValue":l[2]||(l[2]=t=>p.status=t),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(r,{label:"已发布",value:"1"}),e(r,{label:"未发布",value:"0"}),e(r,{label:"已下线",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:a(()=>[e(v,{type:"primary",onClick:w},{default:a(()=>[e(J,null,{default:a(()=>[e($(je))]),_:1}),l[19]||(l[19]=i(" 搜索 "))]),_:1}),e(v,{onClick:Z},{default:a(()=>[e(J,null,{default:a(()=>[e($(xe))]),_:1}),l[20]||(l[20]=i(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{class:"table-card"},{header:a(()=>[S("div",ze,[l[22]||(l[22]=S("span",null,"职位列表",-1)),S("div",Ke,[e(v,{type:"primary",onClick:ae},{default:a(()=>[e(J,null,{default:a(()=>[e($(ke))]),_:1}),l[21]||(l[21]=i(" 发布职位 "))]),_:1})])])]),default:a(()=>[Ce((q(),O(pe,{data:V.value,style:{width:"100%"},border:""},{default:a(()=>[e(b,{prop:"id",label:"ID",width:"80"}),e(b,{prop:"jobName",label:"职位名称","min-width":"180"},{default:a(({row:t})=>[e(v,{type:"primary",link:"",onClick:h=>B(t)},{default:a(()=>[i(C(t.jobName),1)]),_:2},1032,["onClick"])]),_:1}),e(b,{prop:"company",label:"公司名称","min-width":"150"}),e(b,{prop:"department",label:"所属部门",width:"120"}),e(b,{prop:"salaryRange",label:"薪资范围",width:"120"}),e(b,{prop:"location",label:"工作地点",width:"120"}),e(b,{prop:"experience",label:"经验要求",width:"120"}),e(b,{prop:"education",label:"学历要求",width:"100"}),e(b,{prop:"jobType",label:"工作类型",width:"100"}),e(b,{label:"职位标签",width:"200"},{default:a(({row:t})=>[(q(!0),M(G,null,W(t.tags,h=>(q(),O(P,{key:h,size:"small",class:"mx-1"},{default:a(()=>[i(C(h),1)]),_:2},1024))),128))]),_:1}),e(b,{prop:"createdAt",label:"发布时间",width:"180"},{default:a(({row:t})=>[i(C(ie(t.createdAt)),1)]),_:1}),e(b,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[e(P,{type:de(t.status)},{default:a(()=>[i(C(se(t.status)),1)]),_:2},1032,["type"])]),_:1}),e(b,{prop:"applications",label:"投递数",width:"100"},{default:a(({row:t})=>[e(v,{type:"primary",link:"",onClick:h=>re(t)},{default:a(()=>[i(C(t.applications),1)]),_:2},1032,["onClick"])]),_:1}),e(b,{label:"操作",width:"180",fixed:"right"},{default:a(({row:t})=>[e(be,null,{default:a(()=>[e(v,{type:"primary",link:"",onClick:h=>B(t)},{default:a(()=>l[23]||(l[23]=[i(" 编辑 ")])),_:2},1032,["onClick"]),e(v,{type:t.status==="1"?"danger":"success",link:"",onClick:h=>oe(t)},{default:a(()=>[i(C(t.status==="1"?"下线":"发布"),1)]),_:2},1032,["type","onClick"]),e(v,{type:"danger",link:"",onClick:h=>ne(t)},{default:a(()=>l[24]||(l[24]=[i(" 删除 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ge,N.value]]),S("div",we,[e(ce,{"current-page":j.value,"onUpdate:currentPage":l[3]||(l[3]=t=>j.value=t),"page-size":U.value,"onUpdate:pageSize":l[4]||(l[4]=t=>U.value=t),total:A.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ee,onCurrentChange:le},null,8,["current-page","page-size","total"])])]),_:1}),e(fe,{modelValue:x.value,"onUpdate:modelValue":l[18]||(l[18]=t=>x.value=t),title:R.value==="add"?"发布职位":"编辑职位",width:"800px"},{footer:a(()=>[S("span",Je,[e(v,{onClick:l[17]||(l[17]=t=>x.value=!1)},{default:a(()=>l[27]||(l[27]=[i("取消")])),_:1}),e(v,{type:"primary",onClick:ue},{default:a(()=>l[28]||(l[28]=[i(" 确定 ")])),_:1})])]),default:a(()=>[e(D,{ref_key:"jobFormRef",ref:K,model:o,rules:Q,"label-width":"100px"},{default:a(()=>[e(z,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(n,{label:"职位名称",prop:"jobName"},{default:a(()=>[e(d,{modelValue:o.jobName,"onUpdate:modelValue":l[5]||(l[5]=t=>o.jobName=t),placeholder:"请输入职位名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(n,{label:"公司名称",prop:"company"},{default:a(()=>[e(d,{modelValue:o.company,"onUpdate:modelValue":l[6]||(l[6]=t=>o.company=t),placeholder:"请输入公司名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(z,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(n,{label:"所属部门",prop:"department"},{default:a(()=>[e(d,{modelValue:o.department,"onUpdate:modelValue":l[7]||(l[7]=t=>o.department=t),placeholder:"请输入所属部门"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(n,{label:"工作地点",prop:"location"},{default:a(()=>[e(ve,{modelValue:o.location,"onUpdate:modelValue":l[8]||(l[8]=t=>o.location=t),options:X,placeholder:"请选择工作地点"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(z,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(n,{label:"薪资范围",prop:"salaryRange"},{default:a(()=>[e(k,{modelValue:o.salaryRange,"onUpdate:modelValue":l[9]||(l[9]=t=>o.salaryRange=t),placeholder:"请选择薪资范围"},{default:a(()=>[e(r,{label:"10-15K",value:"10-15K"}),e(r,{label:"15-20K",value:"15-20K"}),e(r,{label:"20-25K",value:"20-25K"}),e(r,{label:"25-35K",value:"25-35K"}),e(r,{label:"35K以上",value:"35K+"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(n,{label:"工作性质",prop:"jobType"},{default:a(()=>[e(k,{modelValue:o.jobType,"onUpdate:modelValue":l[10]||(l[10]=t=>o.jobType=t),placeholder:"请选择工作性质"},{default:a(()=>[e(r,{label:"全职",value:"fulltime"}),e(r,{label:"兼职",value:"parttime"}),e(r,{label:"实习",value:"intern"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(z,{gutter:20},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(n,{label:"经验要求",prop:"experience"},{default:a(()=>[e(k,{modelValue:o.experience,"onUpdate:modelValue":l[11]||(l[11]=t=>o.experience=t),placeholder:"请选择经验要求"},{default:a(()=>[e(r,{label:"应届生",value:"fresh"}),e(r,{label:"1-3年",value:"1-3"}),e(r,{label:"3-5年",value:"3-5"}),e(r,{label:"5-10年",value:"5-10"}),e(r,{label:"10年以上",value:"10+"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:a(()=>[e(n,{label:"学历要求",prop:"education"},{default:a(()=>[e(k,{modelValue:o.education,"onUpdate:modelValue":l[12]||(l[12]=t=>o.education=t),placeholder:"请选择学历要求"},{default:a(()=>[e(r,{label:"大专",value:"college"}),e(r,{label:"本科",value:"bachelor"}),e(r,{label:"硕士",value:"master"}),e(r,{label:"博士",value:"phd"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{label:"职位标签",prop:"tags"},{default:a(()=>[e(k,{modelValue:o.tags,"onUpdate:modelValue":l[13]||(l[13]=t=>o.tags=t),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入职位标签"},{default:a(()=>[(q(),M(G,null,W(Y,t=>e(r,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"职位描述",prop:"description"},{default:a(()=>[e(d,{modelValue:o.description,"onUpdate:modelValue":l[14]||(l[14]=t=>o.description=t),type:"textarea",rows:4,placeholder:"请输入职位描述"},null,8,["modelValue"])]),_:1}),e(n,{label:"任职要求",prop:"requirements"},{default:a(()=>[e(d,{modelValue:o.requirements,"onUpdate:modelValue":l[15]||(l[15]=t=>o.requirements=t),type:"textarea",rows:4,placeholder:"请输入任职要求"},null,8,["modelValue"])]),_:1}),e(n,{label:"发布状态",prop:"status"},{default:a(()=>[e(me,{modelValue:o.status,"onUpdate:modelValue":l[16]||(l[16]=t=>o.status=t)},{default:a(()=>[e(E,{label:"0"},{default:a(()=>l[25]||(l[25]=[i("暂存草稿")])),_:1}),e(E,{label:"1"},{default:a(()=>l[26]||(l[26]=[i("立即发布")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const Pe=Ne(Me,[["__scopeId","data-v-add22949"]]);export{Pe as default};
