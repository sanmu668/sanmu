import{d as P,u as x,r as _,G as R,b as d,e as E,B as k,i as u,h as r,g as t,j as f,E as i}from"./index-a7f98987.js";import{r as b}from"./auth-6ba2c8cd.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e257bb45.js";import"./axios-3a665b0f.js";const B={class:"register-container"},h={class:"register-box"},q={class:"login-link"},N=P({__name:"Register",setup(U){const g=x(),m=_(!1),p=_(),s=R({email:"",password:"",confirmPassword:""}),w={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,validator:(a,e,o)=>{e===""?o(new Error("请输入密码")):(s.confirmPassword!==""&&s.password!==s.confirmPassword&&o(new Error("两次输入密码不一致!")),o())},trigger:"blur"}],confirmPassword:[{required:!0,validator:(a,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==s.password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},v=async()=>{var a,e;if(p.value)try{await p.value.validate(),m.value=!0;const o=await b({email:s.email,password:s.password});console.log("Registration response:",o),o.token?(i.success("注册成功！"),g.push("/login")):(console.log("Registration failed with message:",o.message),i.error(o.message||"注册失败，请重试"))}catch(o){console.error("Registration error:",o),(e=(a=o.response)==null?void 0:a.data)!=null&&e.message?i.error(o.response.data.message):o.message?i.error(o.message):i.error("注册失败，请稍后重试")}finally{m.value=!1}},V=()=>{g.push("/login")};return(a,e)=>{const o=d("el-input"),n=d("el-form-item"),c=d("el-button"),y=d("el-form");return E(),k("div",B,[u("div",h,[e[6]||(e[6]=u("h2",null,"注册账号",-1)),r(y,{model:s,rules:w,ref_key:"formRef",ref:p},{default:t(()=>[r(n,{prop:"email"},{default:t(()=>[r(o,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=l=>s.email=l),placeholder:"请输入邮箱","prefix-icon":"el-icon-message"},null,8,["modelValue"])]),_:1}),r(n,{prop:"password"},{default:t(()=>[r(o,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),r(n,{prop:"confirmPassword"},{default:t(()=>[r(o,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>s.confirmPassword=l),type:"password",placeholder:"请确认密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),r(n,null,{default:t(()=>[r(c,{type:"primary",loading:m.value,onClick:v,class:"register-button"},{default:t(()=>e[3]||(e[3]=[f(" 注册 ")])),_:1},8,["loading"])]),_:1}),u("div",q,[e[5]||(e[5]=f(" 已有账号？")),r(c,{link:"",onClick:V},{default:t(()=>e[4]||(e[4]=[f("立即登录")])),_:1})])]),_:1},8,["model"])])])}}});const z=C(N,[["__scopeId","data-v-1fe1e3e0"]]);export{z as default};
